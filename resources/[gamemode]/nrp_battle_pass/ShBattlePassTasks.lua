enum "eBattlePassTasksControllers" {
    "BP_TASK_RUN"                            , -- Пробежать 10 км в общей сумме
    "BP_TASK_DRIVE"                          , -- Проехать 25 км в общей сумме
    "BP_TASK_DAILY_QUEST"                    , -- Выполни 5 ежедневные задачи
    "BP_TASK_RACE_DRIFT"                     , -- Приедь на финиш в режиме дрифт 6 раз
    "BP_TASK_BOUNTY_ORDER"                   , -- Сделай заказ у ППС или у клана после гибели от рук убийцы
    "BP_TASK_BOUNTY_ORDER_PPS"               , -- Сделай заказ у ППС после гибели от рук убийцы
    "BP_TASK_BOUNTY_ORDER_CLAN"              , -- Сделай заказ у кланов после гибели от рук убийцы
    "BP_TASK_JAIL_TIME"                      , -- Проведи в КПЗ или тюрьме более 30 минут в общей сумме
    "BP_TASK_JOB_COURIER_TIME"               , -- Отработай в любой компании курьера 30 минут
    "BP_TASK_DISEASE_TREAT"                  , -- Излечится от двух стадий болезни в общей сумме
    "BP_TASK_JOB_PARK_EMPLOYEE_TIME"         , -- Отработай в любой компании сотрудника парка 30 минут
    "BP_TASK_CASINO_BLACKJACK_REWARD"        , -- Заработать в блэкджеке 35 000 рублей в общей сумме
    "BP_TASK_VEHICLE_MARKETS_VISIT"          , -- Посети все салоны по продаже транспорта. Эконом, Стандарт, Класса Люкс, Премиум, Мото гараж, Верфь, Авиасалон
    "BP_TASK_HOBBY_HUNTING_SELL"             , -- Продай более 15 кг мяса с хобби "Охота" 5 раз
    "BP_TASK_SOCIAL_INTERACTION"             , -- Поставь 9 лайков или дизлайков
    "BP_TASK_CASINO_CLASSIC"                 , -- Сделать ставку в классической рулетке 15 раз
    "BP_TASK_HOBBY_DIGGING"                  , -- Найди 10 кладов в сумме
    "BP_TASK_CINEMA_PLAY_TIME"               , -- Посмотреть любой ролик в кинотеатре длиной более 10 минут суммарно
    "BP_TASK_CASINO_SLOT_MACHINE"            , -- Сделать ставку в слот-машинах 15 раз
    "BP_TASK_PHONE_CALL_TIME"                , -- Поговорить по телефону 10 минут в общей сумме
    "BP_TASK_JOB_FARMER_TIME"                , -- Отработай в любой компании фермером 30 минут
    "BP_TASK_JOB_MECHANIC_TIME"              , -- Отработай в любой компании автомеханика 40 минут
    "BP_TASK_SOCIAL_RATING_DONATE"           , -- Измени свой соц рейтинг через пожертвования на 5 ед
    "BP_TASK_SOCIAL_INTERACTION"             , -- Поставь 15 лайков или дизлайков
    "BP_TASK_CASINO_BLACKJACK"               , -- Сделать ставку в блэкджеке 15 раза
    "BP_TASK_CASINO_DICE"                    , -- Сыграй в азартную игру "Кости" 10 раз
    "BP_TASK_DAILY_QUEST"                    , -- Выполни 6 ежедневных задач
    "BP_TASK_RACE_CIRCLE_TIME"               , -- Приедь на финиш в режиме "Круг на время" 10 раз
    "BP_TASK_HOBBY_FISHING_SELL"             , -- Продай более 15 кг рыбы с хобби "Рыбалка" 15 раз
    "BP_TASK_ARMOR_PURCHASE"                 , -- Купи 500 ед брони в общей сумме
    "BP_TASK_JOB_TRUCKER_TIME"               , -- Отработай в любой компании дальнобойщика 30 минут
    "BP_TASK_JOB_DRIVER_TIME"                , -- Отработай в любой компании водителя 40 минут
    "BP_TASK_CASINO_LOTTERY"                 , -- Купи 10 любых билетов в лотерее
    "BP_TASK_CALORIES_WASTE"                 , -- Сжечь 300 калорий в общей сумме
    "BP_TASK_JAIL_JOB"                       , -- Получи деньги в тюрьме в любой из 3-х работ
    "BP_TASK_STRIP_CLUB_PRIVATE"             , -- Посети приватную комнату в стрип-баре 1 раз
    "BP_TASK_CASINO_ROULETTE"                , -- Сыграть в русской рулетке 10 раза
    "BP_TASK_COOKING"                        , -- Приготовь 3 одинаковых блюда
    "BP_TASK_RACE_DRAG"                      , -- Приедь на финиш в режиме" Драг " 10 раз
    "BP_TASK_JOB_TAXI_TIME"                  , -- Отработай в любой компании таксиста 30 минут
    "BP_TASK_JOB_HCS_TIME"                   , -- Отработай в любой компании сотрудника ЖКХ 40 минут
    "BP_TASK_CASINO_CLASSIC_REWARD"          , -- Заработать в классической рулетке 75 000 рублей в общей сумме
    "BP_TASK_CASINO_SLOT_MACHINE_REWARD"     , -- Заработать в слот-машинах 10 000 рублей в общей сумме
    "BP_TASK_CASINO_BLACKJACK_MAX_BET"       , -- Сделать 10 максимальных ставок в Блэкджеке
    "BP_TASK_FACTION_TASK"                   , -- Выполни 5 задач на смене во фракции
    "BP_TASK_FACTION_DRIVE"                  , -- Проехать 30 км на фракционном транспорте
    "BP_TASK_FACTION_EXP"                    , -- Набрать 1500 фракционного опыта
    "BP_TASK_FACTION_DUTY_TIME"              , -- Проведи на смене во фракции 30 минут
    "BP_TASK_FACTION_SHIFT_PLAN_TASK"        , -- Выполни 6 любых пунктов в плане на смену
    "BP_TASK_FACTION_PAYOUT"                 , -- Получи 5 зарплат по службе
    "BP_TASK_CLAN_GRAFFITI"                  , -- Нарисовать 10 граффити
    "BP_TASK_CLAN_PACKAGES"                  , -- Найти 10 закладок
    "BP_TASK_CLAN_CARGODROP"                 , -- Собрать 2 раза сборшенный груз
    "BP_TASK_CLAN_BOUNTY"                    , -- Выполни заказ в охоте за головами
    "BP_TASK_CLAN_HOLDAREA"                  , -- Участвовать в 3 рейдерских захватах
    "BP_TASK_CLAN_TDM"                       , -- Участвовать в 2 смертельных матчах
    "BP_TASK_CLAN_RAW_COLLECTING"            , -- Собери всего 100 единиц сырья или пустых бутылок
    "BP_TASK_CLAN_FACTORY_PRODUCT"           , -- Собери всего 20 единиц готового товара в любом цеху
    "BP_TASK_PARACHUTE_JUMPING"              , -- Спрыгнуть с парашютом 5 раз
    "BP_TASK_CASINO_LOTTERY_THEME"           , -- Купить любые 3 билета "need_lottery_id" лотереи
    "BP_TASK_GOVERNMENTS_VISIT"              , -- Посетить локации. Мэрии Новороссийска, Горок, Москвы и Красную Площадь в Москве
    "BP_TASK_JOB_LAP_COURIER"                , -- Заверши 15 рейсов курьером в любой компании 
    "BP_TASK_JOB_LAP_DRIVER"                 , -- Заверши 10 рейсов водителем автобуса в любой компании 
    "BP_TASK_JOB_LAP_TAXI"                   , -- Заверши 10 рейсов таксистом в любой компании 
    "BP_TASK_JOB_LAP_FARMER"                 , -- Выполни работу 15 раз в любой компании фермера
    "BP_TASK_JOB_LAP_TOWTRUCKER"             , -- Заверши 10 рейсов эвакуаторщиком в любой компании
    "BP_TASK_JOB_LAP_PARK_EMPLOYEE"          , -- Получи награду 25 раз в любой компании сотрудника парка
    "BP_TASK_JOB_LAP_LOADER"                 , -- Получи награду 100 раз в любой компании грузчика
    "BP_TASK_JOB_LAP_HCS"                    , -- Получи награду 10 раз в любой компании сотрудника ЖКХ
    "BP_TASK_JOB_LAP_TRUCKER"                , -- Соверши 5 рейсов в любой компании дальнобойщика
    "BP_TASK_JOB_LAP_DELIVERY_CARS"          , -- Заверши 10 рейсов доставщиком ТС в любой компании 
    "BP_TASK_JOB_LAP_ANY_COOP"               , -- Соверши 10 рейсов на любой кооперативной работе
    "BP_TASK_FINE_PAYMENT"                   , -- Получи и оплати 10 штрафов за превышение скорости (fine_id)
    "BP_TASK_BAR_ALCOHOL"                    , -- Заказать 5 алкогольных напитков в баре стрип-клуба или казино
    "BP_TASK_JOB_LOADER_TIME"                , -- Отработай в любой компании грузчика 60 минут
    "BP_TASK_CASINO_MSC_CLASSIC_MAX_BET"     , -- Сделай 10 максимальных ставок в классической рулетке Московского казино
    "BP_TASK_CASINO_LOTTERY_VARIANT_3"       , -- Купи 10 самых дорогих билетов в любой лотерее
    "BP_TASK_WEAPON_PURCHASE"                , -- Сделай 10 максимальных ставок в классической рулетке Московского казино

    -- Задачи, связанные с майскими ивентами
    "BP_TASK_ME_TANK_BATTLE_FINISH"  , -- 'Поучаствуй в состязании "Танковая битва" 10 раз'
    "BP_TASK_ME_HUNTER_BATTLE_FINISH", -- 'Поучаствуй в состязании "Бой охотников" 10 раз'
    "BP_TASK_ME_WIN_DRAG_FINISH"     , -- 'Поучаствуй в состязании "Победный драг" 10 раз'
    "BP_TASK_ME_TANK_BATTLE_KILLS"   , -- 'Уничтожь не менее 10 танков противника в течение одного состязания "Танковая битва" '
    "BP_TASK_ME_TANK_BATTLE_DEATHS"  , -- 'Погибни не более 5 раз в состязании "Танковая битва"'
    "BP_TASK_ME_HUNTER_BATTLE_KILLS" , -- 'Уничтожь не менее 5 вертолетов противника в течение одного состязания "Бой охотников" '
    "BP_TASK_ME_WIN_DRAG_TOP1"       , -- '20 раз займи 1 место в состязании "Победный драг"'
    "BP_TASK_ME_TANK_BATTLE_TOP3"    , -- '20 раз займи 1-3 место в состязании "Танковая битва" '
    "BP_TASK_ME_HUNTER_BATTLE_TOP3"  , -- '20 раз займи 1-3 место в состязании "Бой охотников"'
    "BP_TASK_ME_TOTAL_KILLS"         , -- 'Уничтожь в общей сложности 100 противников в состязаниях "Танковая битва" и "Бой охотников"'
    "BP_TASK_ME_ANY_FINISH"          , -- 'Завершить 75 любых майских событий'                                                         

    -- Задачи, связанные с новогодними ивентами
    -- "BP_TASK_NYE_CAR_PUSH_DANGEROUS_SPRINT"        , -- Столкнуть в общей сложности 210 машин в событии "Опасный спринт"
    -- "BP_TASK_NYE_CAR_PUSH_KING_MOUNTAIN"           , -- Столкнуть в общей сложности 210 машин в событии "Царь горы"
    -- "BP_TASK_NYE_TIME_FINISH_DANGEROUS_SPRINT"     , -- 10 раз дойти до финиша в событии "Опасный спринт" до того, как закончится таймер
    -- "BP_TASK_NYE_COUNT_GIFT_COLLECTION"            , -- Собрать в общей сложности 1000 подарков в соревнованиях по "Сбору подарков"
    -- "BP_TASK_NYE_TOTAL_KILLS_GIFT_COLLECTION"      , -- Уничтожить 30 врагов в событии "Сбор подарков"
    -- "BP_TASK_NYE_MAX_DEATH_COUNT_KING_MOUNTAIN"    , -- Умереть не больше max_death_count раз за одно событие "Царь горы"
    -- "BP_TASK_NYE_MAX_DEATH_COUNT_GIFT_COLLECTION"  , -- Умереть не больше max_death_count раз за одно событие "Сбор подарков"
    -- "BP_TASK_NYE_ANY_FINISH"                       , -- Завершить 100 любых новогодних событий
    -- "BP_TASK_NYE_BOOST_FINISH_GIFT_COLLECTION"     , -- Завершить 50 событий "Сбор подарков" под действием бустера
    -- "BP_TASK_NYE_BOOST_FINISH_KING_MOUNTAIN"       , -- Завершить 50 событий "Царь горы" под действием бустера
    -- "BP_TASK_NYE_BOOST_FINISH_DANGEROUS_SPRINT"    , -- Завершить 50 событий "Опасный спринт" под действием бустера
    -- "BP_TASK_NYE_TOP3_FINISH_GIFT_COLLECTION"      , -- 30 раз занять 1-3 место в событии "Сбор подарков"
    -- "BP_TASK_NYE_TOP3_FINISH_KING_MOUNTAIN"        , -- 30 раз занять 1-3 место в событии "Царь горы"
    -- "BP_TASK_NYE_TOP3_FINISH_DANGEROUS_SPRINT"     , -- 30 раз занять 1-3 место в событии "Опасный спринт"
    -- "BP_TASK_NYE_SHOP_PURCHASE"                    , -- Приобрести любой подарок за золотые монеты в Новогоднем магазине
}

BP_TASKS_CONTROLLERS = { }

BP_TASKS_INFO = {
-- Этап 1
    { cid = BP_TASK_CASINO_SLOT_MACHINE        ,              name = "Сказочные\nСлот-машины", desc = 'Сделай ставку в слот-машинах 15 раз'                                                         , reward = 1000  , money = 750 , need_progress = 15    ,                       },
    { cid = BP_TASK_RACE_DRIFT                 ,              name = "Сумасшедший дрифт"     , desc = 'Приедь на финиш в режиме "Дрифт" 15 раз'                                                     , reward = 1200  , money = 900 , need_progress = 15     ,                       },
    { cid = BP_TASK_CASINO_LOTTERY             ,              name = "Счастливчик"           , desc = 'Купи любой лотерейный билет'                                                                 , reward = 1400  , money = 1050, need_progress = 1     ,                       },
    { cid = BP_TASK_BAR_ALCOHOL                ,              name = "Пьянчуга"              , desc = 'Закажи 5 алкогольных напитков в баре стрип-клуба или казино'                                 , reward = 1800  , money = 1350, need_progress = 5     ,                       },
    { cid = BP_TASK_SOCIAL_INTERACTION         ,              name = "Главное статус"        , desc = 'Поставь 18 лайков или дизлайков'                                                             , reward = 2200  , money = 1650, need_progress = 18    ,                       },
    { cid = BP_TASK_DAILY_QUEST                ,              name = "Ежедневные задатки"    , desc = 'Выполни 8 ежедневных задач'                                                                  , reward = 2600  , money = 1950, need_progress = 8    ,                        },
    { cid = BP_TASK_JOB_LAP_COURIER            , branch = 1 , name = "Курьерская мощь"       , desc = 'Заверши 15 рейсов курьером в любой компании '                                                , reward = 3000  , money = 2250, need_progress = 15    ,                       },
    { cid = BP_TASK_FACTION_TASK               , branch = 2 , name = "Посыльный"             , desc = 'Заверши 10 задач или учений на смене во фракции'                                             , reward = 3000  , money = 2250, need_progress = 10    ,                       },
    { cid = BP_TASK_CLAN_GRAFFITI              , branch = 3 , name = "Раскрасить город"      , desc = 'Нарисуй 10 граффити'                                                                         , reward = 3000  , money = 2250, need_progress = 10    ,                       },
    { cid = BP_TASK_DISEASE_TREAT              ,              name = "Здоровье важнее"       , desc = 'Излечись от двух стадий болезни в общей сумме'                                               , reward = 3400  , money = 2550, need_progress = 2     ,                       },
    { cid = BP_TASK_JOB_LAP_PARK_EMPLOYEE      , branch = 1 , name = "Лучший сотрудник"      , desc = 'Получи награду 25 раз в любой компании сотрудника парка'                                     , reward = 3800  , money = 2850, need_progress = 25    ,                       },
    { cid = BP_TASK_FACTION_DRIVE              , branch = 2 , name = "Гос заезд"             , desc = 'Проедь 30 км на фракционном транспорте'                                                      , reward = 3800  , money = 2850, need_progress = 30    ,                       },
    { cid = BP_TASK_CLAN_PACKAGES              , branch = 3 , name = "Удачный поиск"         , desc = 'Найди 10 закладок'                                                                           , reward = 3800  , money = 2850, need_progress = 10    ,                       },
    { cid = BP_TASK_CASINO_BLACKJACK_REWARD    ,              name = "Карточная мощь"        , desc = 'Заработай в блэкджеке 35 000 рублей в общей сумме'                                           , reward = 4500  , money = 3375, need_progress = 35000 ,                       },
-- Этап 2, money = 
    { cid = BP_TASK_FINE_PAYMENT               ,              name = "Опасный нарушитель"    , desc = 'Получи и оплати 10 штрафов за превышение скорости'                                           , reward = 6000  , money = 2100, need_progress = 10    , fine_id = 9           },
    { cid = BP_TASK_CASINO_BLACKJACK           ,              name = "Картежник"             , desc = 'Сделай ставку в блэкджеке 10 раз'                                                            , reward = 7000  , money = 2450, need_progress = 10    ,                       },
    { cid = BP_TASK_CINEMA_PLAY_TIME           ,              name = "Лучший фильм"          , desc = 'Посмотри любой ролик в кинотеатре длиной более 10 минут суммарно'                            , reward = 8000  , money = 2800, need_progress = 10    ,                       },
    { cid = BP_TASK_CASINO_CLASSIC             ,              name = "Классика казино"       , desc = 'Сделай ставку в классической рулетке 15 раз'                                                 , reward = 9000  , money = 3150, need_progress = 15    ,                       },
    { cid = BP_TASK_CASINO_SLOT_MACHINE_REWARD ,              name = "Однорукий бандит"      , desc = 'Заработай на слот-машинах 10 000 рублей в общей сумме'                                       , reward = 10000 , money = 3500, need_progress = 10000 ,                       },
    { cid = BP_TASK_BOUNTY_ORDER               ,              name = "Опасность за углом"    , desc = 'Сделай заказ у ППС или у клана после гибели от рук убийцы'                                   , reward = 11000 , money = 3850, need_progress = 1     ,                       },
    { cid = BP_TASK_HOBBY_DIGGING              ,              name = "Опасный клад"          , desc = 'Найди 10 кладов в сумме'                                                                     , reward = 12000 , money = 4200, need_progress = 10    ,                       },
    { cid = BP_TASK_PHONE_CALL_TIME            ,              name = "Контакты"              , desc = 'Поговори по телефону 10 минут в общей сумме'                                                 , reward = 13000 , money = 4550, need_progress = 10    ,                       },
    { cid = BP_TASK_JOB_LAP_LOADER             , branch = 1 , name = "Помощь на дом"         , desc = 'Получи награду 100 раз в любой компании грузчика'                                            , reward = 14000 , money = 4900, need_progress = 100   ,                       },
    { cid = BP_TASK_FACTION_EXP                , branch = 2 , name = "Честный труженник"     , desc = 'Набери 5000 фракционного опыта'                                                              , reward = 14000 , money = 4900, need_progress = 5000  ,                       },
    { cid = BP_TASK_CLAN_RAW_COLLECTING        , branch = 3 , name = "Пособник"              , desc = 'Собери всего 100 единиц сырья или пустых бутылок'                                            , reward = 14000 , money = 4900, need_progress = 100   ,                       },
    { cid = BP_TASK_JOB_LAP_HCS                , branch = 1 , name = "Помощь на дом"         , desc = 'Получи награду 10 раз в любой компании сотрудника ЖКХ'                                       , reward = 15000 , money = 5250, need_progress = 10    ,                       },
    { cid = BP_TASK_FACTION_DUTY_TIME          , branch = 2 , name = "Постовой"              , desc = 'Проведи на смене во фракции 30 минут'                                                        , reward = 15000 , money = 5250, need_progress = 30    ,                       },
    { cid = BP_TASK_CLAN_HOLDAREA              , branch = 3 , name = "Полный захват"         , desc = 'Поучаствуй в 3 рейдерских захватах'                                                          , reward = 15000 , money = 5250, need_progress = 3     ,                       },
-- Этап 3, money = 
    { cid = BP_TASK_SOCIAL_RATING_DONATE       ,              name = "Изменяй и властвуй"    , desc = 'Измени свой соц рейтинг через пожертвования на 5 ед'                                         , reward = 20000 , money = 3000, need_progress = 5     ,                       },
    { cid = BP_TASK_CASINO_LOTTERY             ,              name = "Развитие азарта"       , desc = 'Купи 10 любых билетов в лотерее'                                                             , reward = 23000 , money = 3450, need_progress = 10    ,                       },
    { cid = BP_TASK_CASINO_BLACKJACK           ,              name = "Карты. Деньги"         , desc = 'Сделать ставку в блэкджеке 15 раз'                                                           , reward = 26000 , money = 3900, need_progress = 15    ,                       },
    { cid = BP_TASK_CASINO_DICE                ,              name = "Тяжелые кости"         , desc = 'Сыграй в азартную игру "Кости" 10 раз'                                                       , reward = 30000 , money = 4500, need_progress = 10    ,                       },
    { cid = BP_TASK_DAILY_QUEST                ,              name = "Ежедневный труд"       , desc = 'Выполни 12 ежедневных задач'                                                                 , reward = 30000 , money = 4500, need_progress = 12    ,                       },
    { cid = BP_TASK_RACE_CIRCLE_TIME           ,              name = "Идеальный круг"        , desc = 'Заверши гонку финишом в режиме "Круг на время" 10 раз'                                       , reward = 32000 , money = 4800, need_progress = 10    ,                       },
    { cid = BP_TASK_HOBBY_FISHING_SELL         ,              name = "Сочная рыбалка"        , desc = 'Продай более 15 кг рыбы с хобби "Рыбалка" 15 раз'                                            , reward = 34000 , money = 5100, need_progress = 15    , need_weight = 15,     },
    { cid = BP_TASK_SOCIAL_INTERACTION         ,              name = "Главное статус"        , desc = 'Поставь 36 лайков или дизлайков'                                                             , reward = 36000 , money = 5400, need_progress = 36    ,                       },
    { cid = BP_TASK_JOB_LAP_TRUCKER            , branch = 1 , name = "Железные седла"        , desc = 'Соверши 5 рейсов в любой компании дальнобойщика'                                             , reward = 38000 , money = 5700, need_progress = 5     ,                       },
    { cid = BP_TASK_FACTION_DUTY_TIME          , branch = 2 , name = "Развитие"              , desc = 'Проведи на смене во фракции 60 минут'                                                        , reward = 38000 , money = 5700, need_progress = 60    ,                       },
    { cid = BP_TASK_CLAN_BOUNTY                , branch = 3 , name = "Мститель"              , desc = 'Выполни заказ в охоте за головами'                                                           , reward = 38000 , money = 5700, need_progress = 1     ,                       },
    { cid = BP_TASK_JOB_LAP_ANY_COOP           , branch = 1 , name = "Совместный труд"       , desc = 'Соверши 10 рейсов на любой кооперативной работе'                                             , reward = 40000 , money = 6000, need_progress = 10    ,                       },
    { cid = BP_TASK_FACTION_DRIVE              , branch = 2 , name = "На побегушках"         , desc = 'Проедь 50 км на фракционном транспорте'                                                      , reward = 40000 , money = 6000, need_progress = 50    ,                       },
    { cid = BP_TASK_CLAN_HOLDAREA              , branch = 3 , name = "Рейдер"                , desc = 'Поучаствуй в 5 рейдерских захватах'                                                          , reward = 40000 , money = 6000, need_progress = 5     ,                       },
-- Этап 4, money = 
    { cid = BP_TASK_CASINO_LOTTERY             ,              name = "Невероятная Лотерея"   , desc = 'Купи 20 любых билетов в лотерее'                                                             , reward = 45000 , money = 4500, need_progress = 20    ,                       },
    { cid = BP_TASK_CALORIES_WASTE             ,              name = "Будущие голодание"     , desc = 'Сожги 200 калорий в общей сумме'                                                             , reward = 45000 , money = 4500, need_progress = 200   ,                       },
    { cid = BP_TASK_CASINO_BLACKJACK_MAX_BET   ,              name = "Риски"                 , desc = 'Сделай 10 максимальных ставок в Блэкджеке'                                                   , reward = 48000 , money = 4800, need_progress = 10    ,                       },
    { cid = BP_TASK_STRIP_CLUB_PRIVATE         ,              name = "Блуждающие сны"        , desc = 'Посети приватную комнату в стрип-баре 10 раз'                                                , reward = 52000 , money = 5200, need_progress = 10    ,                       },
    { cid = BP_TASK_CASINO_ROULETTE            ,              name = "Опасная рулетка"       , desc = 'Сыграй в русской рулетке 10 раза'                                                            , reward = 56000 , money = 5600, need_progress = 10    ,                       },
    { cid = BP_TASK_COOKING                    ,              name = "Мастер-Повар"          , desc = 'Приготовь 3 одинаковых блюда '                                                               , reward = 58000 , money = 5800, need_progress = 3     ,                       },
    { cid = BP_TASK_RACE_DRAG                  ,              name = "Бешеный драг"          , desc = 'Приедь на финиш в режиме "Драг" 15 раз'                                                      , reward = 64000 , money = 6400, need_progress = 15    ,                       },
    { cid = BP_TASK_JOB_LAP_DELIVERY_CARS      , branch = 1 , name = "Счастье в доставке"    , desc = 'Заверши 10 рейсов доставщиком ТС в любой компании '                                          , reward = 75000 , money = 7500, need_progress = 10    ,                       },
    { cid = BP_TASK_FACTION_TASK               , branch = 2 , name = "Максимум развития"     , desc = 'Заверши 10 любых заданий или учений на смене во фракции'                                     , reward = 75000 , money = 7500, need_progress = 10    , include_trainings = true, },
    { cid = BP_TASK_CLAN_FACTORY_PRODUCT       , branch = 3 , name = "Граффер"               , desc = 'Собери всего 20 единиц готового товара в любом цеху'                                         , reward = 75000 , money = 7500, need_progress = 20    ,                       },
    { cid = BP_TASK_JOB_LAP_TOWTRUCKER         , branch = 1 , name = "Эвакуатор"             , desc = 'Заверши 10 рейсов эвакуаторщиком в любой компании '                                          , reward = 75000 , money = 7500, need_progress = 10    ,                       },
    { cid = BP_TASK_FACTION_PAYOUT             , branch = 2 , name = "Госслужба"             , desc = 'Получи 5 зарплат по службе'                                                                  , reward = 75000 , money = 7500, need_progress = 5     ,                       },
    { cid = BP_TASK_CLAN_TDM                   , branch = 3 , name = "Групповая опасность"   , desc = 'Поучаствуй в 2 смертельных матчах'                                                           , reward = 75000 , money = 7500, need_progress = 2     ,                       },
    { cid = BP_TASK_CASINO_MSC_CLASSIC_MAX_BET ,              name = "Покори Москву"         , desc = 'Сделай 10 максимальных ставок в классической рулетке Московского казино'                     , reward = 75000 , money = 7500, need_progress = 10    ,                       },
}

do
    local branching_tasks_data = {
        job = {
            tasks = {
                BP_TASK_JOB_COURIER_TIME,
                BP_TASK_JOB_DRIVER_TIME,
                BP_TASK_JOB_TAXI_TIME,
                BP_TASK_JOB_TRUCKER_TIME,
                BP_TASK_JOB_FARMER_TIME,
                BP_TASK_JOB_MECHANIC_TIME,
                BP_TASK_JOB_PARK_EMPLOYEE_TIME,
                BP_TASK_JOB_HCS_TIME,
                BP_TASK_JOB_LOADER_TIME,
                BP_TASK_JOB_LAP_COURIER,
                BP_TASK_JOB_LAP_DRIVER,
                BP_TASK_JOB_LAP_TAXI,
                BP_TASK_JOB_LAP_FARMER,
                BP_TASK_JOB_LAP_TOWTRUCKER,
                BP_TASK_JOB_LAP_PARK_EMPLOYEE,
                BP_TASK_JOB_LAP_LOADER,
                BP_TASK_JOB_LAP_HCS,
                BP_TASK_JOB_LAP_TRUCKER,
                BP_TASK_JOB_LAP_DELIVERY_CARS,
                BP_TASK_JOB_LAP_ANY_COOP,
            },
            condition = function( player )
                return not player:IsInFaction( ) and not player:IsInClan( )
            end,
        },
        faction = {
            tasks = {
                BP_TASK_FACTION_TASK,
                BP_TASK_FACTION_DRIVE,
                BP_TASK_FACTION_EXP,
                BP_TASK_FACTION_DUTY_TIME,
                BP_TASK_FACTION_SHIFT_PLAN_TASK,
                BP_TASK_FACTION_PAYOUT,
            },
            condition = function( player )
                return player:IsInFaction( )
            end,
        },
        clan = {
            tasks = {
                BP_TASK_CLAN_GRAFFITI,
                BP_TASK_CLAN_PACKAGES,
                BP_TASK_CLAN_CARGODROP,
                BP_TASK_CLAN_BOUNTY,
                BP_TASK_CLAN_HOLDAREA,
                BP_TASK_CLAN_TDM,
                BP_TASK_CLAN_RAW_COLLECTING,
                BP_TASK_CLAN_FACTORY_PRODUCT,
            },
            condition = function( player )
                return player:IsInClan( )
            end,
        },
    }

    local task_cid_to_condition = { }
    local task_cid_to_branch_id = { }
    for branch_id, data in pairs( branching_tasks_data ) do
        for i, task_cid in pairs( data.tasks ) do
            task_cid_to_condition[ task_cid ] = data.condition
            task_cid_to_branch_id[ task_cid ] = branch_id
        end
    end

    local offset = 0
    for i, task_info in pairs( BP_TASKS_INFO ) do
        task_info.branch_id = task_cid_to_branch_id[ task_info.cid ]
        task_info.condition = task_cid_to_condition[ task_info.cid ]
        if task_info.branch and not task_info.branch_id then
            error( "no branch_id of task " .. task_info.name )
        elseif not task_info.branch and task_info.branch_id then
            error( "no branch of task " .. task_info.name )
        end
        if task_info.condition and task_info.branch > 1 then
            offset = offset + 1
        end
        task_info.id = i - offset
        task_info.need_progress = task_info.need_progress or 1
    end

    for i, stage in ipairs( BP_STAGES ) do
        stage.tasks = { }
    end

    local stage_id = 1
    local stage = BP_STAGES[ stage_id ]
    local task_n = 1
    local task = BP_TASKS_INFO[ task_n ]
    local offset = 0
    while( stage and task ) do
        if #stage.tasks - offset < stage.tasks_count then
            task.stage_id = stage_id
            task.start_ts = stage.start_ts
            table.insert( stage.tasks, task )
            if task.condition and ( BP_TASKS_INFO[ task_n + 1 ].branch or 1 ) ~= 1 then
                offset = offset + 1
            end

            task_n = task_n + 1
            task = BP_TASKS_INFO[ task_n ]
        else
            stage_id = stage_id + 1
            stage = BP_STAGES[ stage_id ]
            offset = 0
        end
    end

    BP_TASKS_INFO_BY_ID = { }
    BP_TASKS_INFO_BY_CID = { }
    for i, task_info in ipairs( BP_TASKS_INFO ) do
        if not BP_TASKS_INFO_BY_ID[ task_info.id ] then
            BP_TASKS_INFO_BY_ID[ task_info.id ] = { }
        end
        table.insert( BP_TASKS_INFO_BY_ID[ task_info.id ], task_info )

        if not BP_TASKS_INFO_BY_CID[ task_info.cid ] then
            BP_TASKS_INFO_BY_CID[ task_info.cid ] = { }
        end
        table.insert( BP_TASKS_INFO_BY_CID[ task_info.cid ], task_info )
    end
end

function GetTaskInfo( player, id, key )
    for i, task_info in ipairs( BP_TASKS_INFO_BY_ID[ id ] ) do
        if not task_info.condition or task_info.condition( player ) then
            return key and task_info[ key ] or task_info
        end
    end
end

function GetTaskInfoByCID( cid, id, key )
    for i, task_info in ipairs( BP_TASKS_INFO_BY_CID[ cid ] ) do
        if task_info.id == id then
            return key and task_info[ key ] or task_info
        end
    end
end

addEventHandler( "onResourceStart", resourceRoot, function( )
    for i, task_info in pairs( BP_TASKS_INFO ) do
        if not BP_TASKS_CONTROLLERS[ task_info.cid ] then
            error( "no controller of task " .. task_info.name )
        end
    end
end )